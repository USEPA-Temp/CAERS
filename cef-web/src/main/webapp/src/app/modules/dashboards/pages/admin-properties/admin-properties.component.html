<div *ngIf="properties">

  <div class="card mb-3">
    <div class="card-header text-center">
      <strong>Admin Properties</strong>
    </div>
    <div class="card-body">
      <form [formGroup]="propertyForm">
        <div class="row pb-2" *ngFor="let prop of properties">
          <div class="col-sm-6 col-lg-3">
            <label for="{{prop.name + 'Input'}}" class="ml-1 col-form-label">
              <strong>{{prop.name}}:</strong>
            </label>
          </div>
          <div class="col-sm-6 col-lg-3">
            <input type="text" class="form-control" id="{{prop.name + 'Input'}}" [formControlName]="prop.name">
            <app-validation-message [control]="propertyForm.get([prop.name])"></app-validation-message>
          </div>
        </div>

        <div class="float-right mb-3">
          
          <button type="button" class="btn btn-success" (click)="onSubmit()">Update Properties</button>
        </div>
      </form>
    </div>
  </div>

  <div class="card mb-3">
    <div class="card-header text-center">
      <strong>Admin Functions</strong>
    </div>
    <div class="card-body">

      <div class="row pb-3" *ngIf="migrationFeature">
        <button type="button" class="btn btn-success mr-2" (click)="openMigrateUserAssociationsModal()" [disabled]="migrating">
          Migrate User Associations
          <div class="spinner-border spinner-border-sm text-light" role="status" *ngIf="migrating">
            <span class="sr-only">Migrating...</span>
          </div>
        </button>
        Migrate user facility associations from CDX into CAER. This will only work if there are not any existing associations and should not be used in any production environments.
      </div>
      <div class="row pb-3">
        <button type="button" class="btn btn-success mr-2" (click)="openRecalculateEmissionTonsModal()">Recalculate Emission Tons</button>
        Recalculate the emissions in tons for a specific report.
      </div>
      <div class="row pb-3">
        <button type="button" class="btn btn-success mr-2" (click)="openTestEmailModal()">Send test email</button>
        Send a test email to the addresses listed as admin emails.
      </div>
      <form [formGroup]="deleteReportForm">
        <div class="row">
          <button type="button" class="btn btn-success mr-2" (click)="deleteReportModal()" [disabled]="!deleteReportForm.get('deleteReportId').value">Delete Emissions Report</button>
          <label for="deleteReportId" class="ml-1 col-form-label"><strong>Report ID:</strong></label>&nbsp;
          <input type="text" id="deleteReportId" formControlName="deleteReportId"/>&nbsp;&nbsp;
          Using the respective report ID, permanently delete from CAERS the facility report entered in the adjacent text field.
        </div>
        <div class="row pb-3">
          <div class="col-sm-2"></div>
          <div class="col-sm-4">
            <app-validation-message [control]="deleteReportForm.get('deleteReportId')"></app-validation-message>
          </div>
        </div>
      </form>
      

    </div>
  </div>
</div>