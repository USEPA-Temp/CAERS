<div>
  <div class="row">
    <div class="col-sm-12 col-md-9">
      <div class="card">
        <div class="card-header text-center">
          <strong>User Feedback Report</strong>
        </div>

        <div class="card-body">
          <div class="d-flex flex-row pl-2 py-3">
            <label for="cbo-filter-agency" class="col-form-label col-form-label-sm mr-2">
              <strong>Agency Code:</strong>
            </label>
            <select id="cbo-filter-agency" class="mr-3 form-control form-control-sm" style="width: 150px"
              [formControl]="cboFilterAgency">
              <option *ngFor="let item of (availableAgencies | sortBy:'':'asc')" [value]="item">{{item}}</option>
            </select>
            <label for="cbo-filter-year" class="col-form-label col-form-label-sm mr-2">
              <strong>Reporting Year:</strong>
            </label>
            <select id="cbo-filter-year" class="mr-3 form-control form-control-sm" style="width: 150px"
              [formControl]="cboFilterYear">
              <option *ngFor="let item of (availableYears | sortBy:'':'desc')" [value]="item">{{item}}</option>
            </select>
          </div>

          <div class="mh-100 overflow-auto" *ngIf="tableData">
            <table class="table table-sm table-striped table-bordered">
              <thead class="thead-cef-medium">
                <tr>
                  <th scope="col" sortable="facilityName" (sort)="onSort($event)">Facility Name</th>
                  <th scope="col" sortable="userName" (sort)="onSort($event)">User Name</th>
                  <th scope="col" sortable="year" (sort)="onSort($event)">Reporting Year</th>
                  <th scope="col" sortable="createdDate" (sort)="onSort($event)">Date/Time</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngIf="tableData.length === 0">
                  <td colspan="4" class="text-center">
                      <strong class="text-larger">No data available.</strong>
                  </td>
                </tr>
                <tr *ngFor="let item of tableData | slice: (page-1) * pageSize : (page-1) * pageSize + pageSize">
                  <td *ngIf="item.facilityName"><a routerLink="." (click)="openFeedbackModal(item)">
                    {{item.facilityName}}
                  </a></td>
                  <td *ngIf="!item.facilityName"><a routerLink="." (click)="openFeedbackModal(item)">
                    Deleted Report
                  </a></td>
                  <td *ngIf="item.userName">{{item.userName}}</td>
                  <td *ngIf="!item.userName">{{item.lastModifiedBy}}</td>
                  <td>{{item.year}}</td>
                  <td>{{item.createdDate | date: 'long'}}</td>
                </tr>
              </tbody>
            </table>
            <ngb-pagination [(page)]="page" [pageSize]="pageSize" [collectionSize]="tableData.length"></ngb-pagination>
          </div>
        </div>
      </div>
    </div>

    <div class="col-sm-12 col-md-3">
      <div style="flex: 0 0 250px">

        <div class="card">
          <div class="card-header text-center">
            <strong>{{cboFilterYear.value}} Rating Averages</strong>
          </div>

          <div class="card-body">
            <div class="mb-3 align-middle">
              <span class="badge badge-pill badge-warning text-larger mr-3"
                style="background-color: #ffb90f; font-size: 100%;" [textContent]="intuitiveRateAvg">
              </span>
              <strong class="mr-2">Intuitive System Navigation</strong>
            </div>
            <div class="mb-3 align-middle">
              <span class="badge badge-pill badge-warning text-larger mr-3"
                style="background-color: #ffb90f; font-size: 100%;" [textContent]="dataEntryScreensAvg">
              </span>
              <strong class="mr-2">Application Data Entry</strong>
            </div>
            <div class="mb-3 align-middle">
              <span class="badge badge-pill badge-warning text-larger mr-3"
                style="background-color: #ffb90f; font-size: 100%;" [textContent]="dataEntryBulkUploadAvg">
              </span>
              <strong class="mr-2">Bulk Upload Template Data Entry</strong>
            </div>
            <div class="mb-3 align-middle">
              <span class="badge badge-pill badge-warning text-larger mr-3"
                style="background-color: #ffb90f; font-size: 100%;" [textContent]="calculationScreensAvg">
              </span>
              <strong class="mr-2">Emissions Calculations</strong>
            </div>
            <div class="mb-3 align-middle">
              <span class="badge badge-pill badge-warning text-larger mr-3"
                style="background-color: #ffb90f; font-size: 100%;" [textContent]="controlsAndControlPathAssignAvg">
              </span>
              <strong class="mr-2">Controls Approach</strong>
            </div>
            <div class="mb-3 align-middle">
              <span class="badge badge-pill badge-warning text-larger mr-3"
                style="background-color: #ffb90f; font-size: 100%;" [textContent]="qualityAssuranceChecksAvg">
              </span>
              <strong class="mr-2">QA Checks</strong>
            </div>
            <div class="mb-3 align-middle">
              <span class="badge badge-pill badge-warning text-larger mr-3"
                style="background-color: #ffb90f; font-size: 100%;" [textContent]="overallReportingTimeAvg">
              </span>
              <strong class="mr-2">Overall Reporting Time</strong>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>