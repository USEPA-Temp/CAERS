<div class="pt-3 pb-3"  *ngIf="userContext.user">
    The following table shows industry submissions of the Combined Air Emissions Report for your agency (&nbsp;{{ userContext.user.agencyCode }}&nbsp;) that are awaiting review.
</div>

<form>

  <div class="mh-100 overflow-auto">
    <table class="table table-sm table-striped table-bordered">
      <thead>
      <tr>
        <th scope="col">Select</th>
        <th scope="col" sortable="facilityName" (sort)="onSort($event)">Facility Name</th>
        <th scope="col" sortable="altFacilityId" (sort)="onSort($event)">Agency Facility ID</th>
        <th scope="col" sortable="operatingStatus" (sort)="onSort($event)">Operating Status</th>
        <th scope="col" sortable="industry" (sort)="onSort($event)">Industry Sector</th>
        <th scope="col" sortable="year" (sort)="onSort($event)">Submittal Year</th>
        <th scope="col" sortable="lastSubmittalYear" (sort)="onSort($event)">Last Submittal Year</th>
        <th scope="col">Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let submission of tableData">
        <th scope="row"><input type="checkbox" name="report{{submission.emissionsReportId}}" [(ngModel)]="submission.checked"></th>
        <td><ngb-highlight [result]="submission.facilityName"></ngb-highlight></td>
        <td><ngb-highlight [result]="submission.altFacilityId"></ngb-highlight></td>
        <td><ngb-highlight [result]="submission.operatingStatus"></ngb-highlight></td>
        <td><ngb-highlight [result]="submission.industry"></ngb-highlight></td>
        <td><ngb-highlight [result]="submission.year"></ngb-highlight></td>
        <td><ngb-highlight [result]="submission.lastSubmittalYear || 'None submitted previously'"></ngb-highlight></td>
        <td><button class="btn btn-primary btn-sm" (click)="openSummaryModal(submission)">Summary</button><span class="pr-2"></span> 
            <button class="btn btn-primary btn-sm" 
                [routerLink]="['/facility', submission.eisProgramId, 'report', submission.emissionsReportId, 'summary']">View Report</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

</form>
